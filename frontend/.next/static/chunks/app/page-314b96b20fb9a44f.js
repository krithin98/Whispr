(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1812:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eu});var s=a(5155),r=a(2115);let i="http://149.130.212.44:8000",l={async getStrategies(){let e=await fetch("".concat(i,"/strategies"));if(!e.ok)throw Error("Failed to fetch strategies");return e.json()},async createStrategy(e){let t=await fetch("".concat(i,"/strategies"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create strategy");return t.json()},async updateStrategy(e,t){let a=await fetch("".concat(i,"/strategies/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to update strategy");return a.json()},async deleteStrategy(e){if(!(await fetch("".concat(i,"/strategies/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete strategy")},async toggleStrategy(e){let t=await fetch("".concat(i,"/strategies/").concat(e,"/toggle"),{method:"POST"});if(!t.ok)throw Error("Failed to toggle strategy");return t.json()},async getOpenTrades(){let e=await fetch("".concat(i,"/trades/open"));if(!e.ok)throw Error("Failed to fetch open trades");return e.json()},async getClosedTrades(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=await fetch("".concat(i,"/trades/closed?limit=").concat(e));if(!t.ok)throw Error("Failed to fetch closed trades");return t.json()},async placeTrade(e){let t=await fetch("".concat(i,"/trades"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to place trade");return t.json()},async closeTrade(e,t){let a=await fetch("".concat(i,"/trades/").concat(e,"/close"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exit_price:t})});if(!a.ok)throw Error("Failed to close trade");return a.json()},async getPerformance(){let e=await fetch("".concat(i,"/trades/performance"));if(!e.ok)throw Error("Failed to fetch performance");return e.json()},async getStrategyTriggers(e){let t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[a,s]=e;void 0!==s&&t.append(a,s.toString())});let a=await fetch("".concat(i,"/strategy-triggers?").concat(t));if(!a.ok)throw Error("Failed to fetch strategy triggers");return a.json()},async updateTriggerOutcome(e,t,a,s){let r=await fetch("".concat(i,"/strategy-triggers/").concat(e,"/outcome"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({outcome:t,outcome_price:a,outcome_time:s})});if(!r.ok)throw Error("Failed to update trigger outcome");return r.json()},async getStrategyTriggersSummary(){let e=await fetch("".concat(i,"/strategy-triggers/analytics/summary"));if(!e.ok)throw Error("Failed to fetch triggers summary");return e.json()},createWebSocketConnection:()=>new WebSocket("ws://localhost:8000/ws/ticks"),async getCostComparison(){let e=await fetch("".concat(i,"/costs"));if(!e.ok)throw Error("Failed to fetch cost comparison");return e.json()},yahooFinance:{async getQuote(e){try{if("SPY"===e.toUpperCase()){let e=await fetch("".concat(i,"/market-data/spy"));if(!e.ok)throw Error("Failed to fetch SPY data from backend");let t=(await e.json()).data;return{timestamp:t.timestamp,symbol:t.symbol,price:t.price,volume:t.volume,bid:t.bid,ask:t.ask,change:t.change,change_percent:t.change_percent,tick_id:t.tick_id,source:t.source}}{var t;let a=await fetch("".concat("https://query1.finance.yahoo.com/v8/finance/chart","/").concat(e,"?interval=1m&range=1d"));if(!a.ok)throw Error("Failed to fetch quote");let s=(await a.json()).chart.result[0],r=s.meta,i=s.indicators.quote[0],l=r.regularMarketPrice,n=r.previousClose,c=l-n;return{timestamp:new Date().toISOString(),symbol:e.toUpperCase(),price:l,volume:(null==(t=i.volume)?void 0:t[i.volume.length-1])||0,bid:l-.01,ask:l+.01,change:c,change_percent:c/n*100,tick_id:Date.now(),source:"Yahoo Finance"}}}catch(s){console.error("Failed to fetch market data:",s);let t=450+20*Math.random(),a=(Math.random()-.5)*5;return{timestamp:new Date().toISOString(),symbol:e.toUpperCase(),price:t,volume:5e7+2e7*Math.random(),bid:t-.01,ask:t+.01,change:a,change_percent:a/t*100,tick_id:Date.now(),source:"Simulated (Rate Limited)"}}},async getMultipleQuotes(e){return await Promise.all(e.map(e=>this.getQuote(e)))},async getHistoricalData(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1d";try{let r=await fetch("".concat(i,"/market-data/historical/").concat(e,"?start_date=").concat(t,"&end_date=").concat(a,"&interval=").concat(s));if(!r.ok)throw Error("Failed to fetch historical data");return await r.json()}catch(e){throw console.error("Failed to fetch historical data:",e),e}}}},n=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),c=e=>"".concat(e>0?"+":"").concat(e.toFixed(2),"%"),d=e=>{switch(e.toLowerCase()){case"active":case"open":return"text-green-400";case"closed":return"text-blue-400";case"inactive":return"text-gray-400";default:return"text-white"}};var o=a(2821),x=a(5889);function g(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.QP)((0,o.$)(t))}function h(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:g("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:g("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:g("leading-none font-semibold",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:g("text-muted-foreground text-sm",t),...a})}function v(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:g("px-6",t),...a})}function y(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:g("w-full caption-bottom text-sm",t),...a})})}function f(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:g("[&_tr]:border-b",t),...a})}function j(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:g("[&_tr:last-child]:border-0",t),...a})}function b(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:g("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function N(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:g("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function w(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:g("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}var k=a(9511),_=a(5229);function S(e){let{...t}=e;return(0,s.jsx)(k.bL,{"data-slot":"dialog",...t})}function C(e){let{...t}=e;return(0,s.jsx)(k.l9,{"data-slot":"dialog-trigger",...t})}function E(e){let{...t}=e;return(0,s.jsx)(k.ZL,{"data-slot":"dialog-portal",...t})}function F(e){let{...t}=e;return(0,s.jsx)(k.bm,{"data-slot":"dialog-close",...t})}function T(e){let{className:t,...a}=e;return(0,s.jsx)(k.hJ,{"data-slot":"dialog-overlay",className:g("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function P(e){let{className:t,children:a,showCloseButton:r=!0,...i}=e;return(0,s.jsxs)(E,{"data-slot":"dialog-portal",children:[(0,s.jsx)(T,{}),(0,s.jsxs)(k.UC,{"data-slot":"dialog-content",className:g("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...i,children:[a,r&&(0,s.jsxs)(k.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(_.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function D(e){let{className:t,...a}=e;return(0,s.jsx)(k.hE,{"data-slot":"dialog-title",className:g("text-lg leading-none font-semibold",t),...a})}function z(e){let{className:t,...a}=e;return(0,s.jsx)(k.VY,{"data-slot":"dialog-description",className:g("text-muted-foreground text-sm",t),...a})}var A=a(2467),L=a(3101);let O=(0,L.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function R(e){let{className:t,variant:a,size:r,asChild:i=!1,...l}=e,n=i?A.DX:"button";return(0,s.jsx)(n,{"data-slot":"button",className:g(O({variant:a,size:r,className:t})),...l})}function U(e){let{className:t,type:a,...r}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:g("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var q=a(489);function W(e){let{className:t,...a}=e;return(0,s.jsx)(q.b,{"data-slot":"label",className:g("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}function B(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:g("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}var M=a(5824),I=a(4033),V=a(5917),J=a(2108);function Q(e){let{...t}=e;return(0,s.jsx)(M.bL,{"data-slot":"select",...t})}function Y(e){let{...t}=e;return(0,s.jsx)(M.WT,{"data-slot":"select-value",...t})}function G(e){let{className:t,size:a="default",children:r,...i}=e;return(0,s.jsxs)(M.l9,{"data-slot":"select-trigger","data-size":a,className:g("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[r,(0,s.jsx)(M.In,{asChild:!0,children:(0,s.jsx)(I.A,{className:"size-4 opacity-50"})})]})}function H(e){let{className:t,children:a,position:r="popper",...i}=e;return(0,s.jsx)(M.ZL,{children:(0,s.jsxs)(M.UC,{"data-slot":"select-content",className:g("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,s.jsx)(X,{}),(0,s.jsx)(M.LM,{className:g("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)($,{})]})})}function Z(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(M.q7,{"data-slot":"select-item",className:g("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(M.VF,{children:(0,s.jsx)(V.A,{className:"size-4"})})}),(0,s.jsx)(M.p4,{children:a})]})}function X(e){let{className:t,...a}=e;return(0,s.jsx)(M.PP,{"data-slot":"select-scroll-up-button",className:g("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(J.A,{className:"size-4"})})}function $(e){let{className:t,...a}=e;return(0,s.jsx)(M.wn,{"data-slot":"select-scroll-down-button",className:g("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(I.A,{className:"size-4"})})}var K=a(8162);let ee=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(K.bL,{ref:t,className:g("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(K.C1,{className:g("flex items-center justify-center text-current"),children:(0,s.jsx)(V.A,{className:"h-4 w-4"})})})});ee.displayName=K.bL.displayName;let et=(0,L.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ea(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:g(et({variant:a}),t),...r})}var es=a(574);let er=es.bL,ei=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(es.B8,{ref:t,className:g("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});ei.displayName=es.B8.displayName;let el=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(es.l9,{ref:t,className:g("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});el.displayName=es.l9.displayName;let en=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(es.UC,{ref:t,className:g("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});en.displayName=es.UC.displayName;let ec=(0,L.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ed=r.forwardRef((e,t)=>{let{className:a,variant:r,...i}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:g(ec({variant:r}),a),...i})});ed.displayName="Alert",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:g("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let eo=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:g("text-sm [&_p]:leading-relaxed",a),...r})});eo.displayName="AlertDescription";var ex=a(534),eg=a(5299);function eh(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[l,n]=(0,r.useState)("SPY"),[c,d]=(0,r.useState)(""),[o,x]=(0,r.useState)(""),[g,k]=(0,r.useState)(!1),[_,S]=(0,r.useState)([]),[C,E]=(0,r.useState)(null),[F,T]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=new Date,t=new Date(e.getTime()-7776e6);x(e.toISOString().split("T")[0]),d(t.toISOString().split("T")[0])},[]),(0,r.useEffect)(()=>{P()},[]);let P=async()=>{try{let e=await fetch("/api/backtest/strategies");if(e.ok){let a=await e.json();t(a.strategies||[])}else T("Failed to load strategies")}catch(e){T("Failed to load strategies")}},D=async()=>{if(0===a.length)return void T("Please select at least one strategy");k(!0),T(null);try{let e=await fetch("/api/backtest/multiple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({strategy_ids:a,symbol:l,start_date:c,end_date:o})});if(e.ok){let t=await e.json();S(t.results||[]),E(t.summary||null)}else{let t=await e.json();T(t.detail||"Backtest failed")}}catch(e){T("Backtest failed")}finally{k(!1)}},z=e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},A=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),L=e=>"".concat(e.toFixed(2),"%"),O=e=>e>=0?"text-green-600":"text-red-600";return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(h,{children:[(0,s.jsxs)(u,{children:[(0,s.jsxs)(m,{className:"flex items-center gap-2",children:[(0,s.jsx)(ex.A,{className:"w-5 h-5"}),"Strategy Backtesting"]}),(0,s.jsx)(p,{children:"Test your trading strategies against historical data to evaluate performance"})]}),(0,s.jsxs)(v,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(W,{className:"text-base font-semibold",children:"Select Strategies"}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(R,{variant:"outline",size:"sm",onClick:()=>{i(e.map(e=>e.id))},children:"Select All"}),(0,s.jsx)(R,{variant:"outline",size:"sm",onClick:()=>{i([])},children:"Clear"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-60 overflow-y-auto",children:e.map(e=>(0,s.jsx)("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors ".concat(a.includes(e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>z(e.id),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(ee,{checked:a.includes(e.id),onChange:()=>z(e.id)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium text-sm truncate",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.type}),(0,s.jsx)("div",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.description})]})]})},e.id))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(W,{htmlFor:"symbol",children:"Symbol"}),(0,s.jsx)(U,{id:"symbol",value:l,onChange:e=>n(e.target.value.toUpperCase()),placeholder:"SPY"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(W,{htmlFor:"startDate",children:"Start Date"}),(0,s.jsx)(U,{id:"startDate",type:"date",value:c,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(W,{htmlFor:"endDate",children:"End Date"}),(0,s.jsx)(U,{id:"endDate",type:"date",value:o,onChange:e=>x(e.target.value)})]})]}),(0,s.jsx)(R,{onClick:D,disabled:g||0===a.length,className:"w-full",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eg.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Running Backtest..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ex.A,{className:"w-4 h-4 mr-2"}),"Run Backtest"]})}),F&&(0,s.jsx)(ed,{variant:"destructive",children:(0,s.jsx)(eo,{children:F})})]})]}),_.length>0&&(0,s.jsxs)("div",{className:"space-y-6",children:[C&&(0,s.jsxs)(h,{children:[(0,s.jsx)(u,{children:(0,s.jsx)(m,{children:"Backtest Summary"})}),(0,s.jsx)(v,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:C.total_strategies}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Strategies Tested"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(O(C.avg_return)),children:L(C.avg_return)}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Average Return"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:L(C.avg_win_rate)}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Average Win Rate"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:C.best_strategy?L(C.best_strategy.total_return):"N/A"}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Best Strategy"})]})]})})]}),(0,s.jsxs)(er,{defaultValue:"overview",className:"space-y-4",children:[(0,s.jsxs)(ei,{children:[(0,s.jsx)(el,{value:"overview",children:"Overview"}),(0,s.jsx)(el,{value:"trades",children:"Trade Details"}),(0,s.jsx)(el,{value:"equity",children:"Equity Curve"})]}),(0,s.jsx)(en,{value:"overview",className:"space-y-4",children:(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:_.map(e=>(0,s.jsxs)(h,{children:[(0,s.jsx)(u,{children:(0,s.jsxs)(m,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"truncate",children:e.strategy_name}),(0,s.jsx)(ea,{variant:e.total_return>=0?"default":"destructive",children:L(e.total_return)})]})}),(0,s.jsxs)(v,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Total Trades"}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:e.total_trades})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Win Rate"}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:L(e.win_rate)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Total P&L"}),(0,s.jsx)("div",{className:"text-lg font-semibold ".concat(O(e.total_pnl)),children:A(e.total_pnl)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Max Drawdown"}),(0,s.jsx)("div",{className:"text-lg font-semibold text-red-600",children:L(e.max_drawdown)})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Sharpe Ratio:"}),(0,s.jsx)("span",{children:e.sharpe_ratio.toFixed(2)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Profit Factor:"}),(0,s.jsx)("span",{children:e.profit_factor.toFixed(2)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Avg Trade Duration:"}),(0,s.jsxs)("span",{children:[e.avg_trade_duration.toFixed(1)," days"]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Trade Breakdown"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 bg-green-100 rounded p-2 text-center",children:[(0,s.jsx)("div",{className:"text-green-800 font-semibold",children:e.winning_trades}),(0,s.jsx)("div",{className:"text-green-600 text-xs",children:"Wins"})]}),(0,s.jsxs)("div",{className:"flex-1 bg-red-100 rounded p-2 text-center",children:[(0,s.jsx)("div",{className:"text-red-800 font-semibold",children:e.losing_trades}),(0,s.jsx)("div",{className:"text-red-600 text-xs",children:"Losses"})]})]})]})]})]},e.strategy_id))})}),(0,s.jsx)(en,{value:"trades",className:"space-y-4",children:_.map(e=>(0,s.jsxs)(h,{children:[(0,s.jsx)(u,{children:(0,s.jsxs)(m,{children:[e.strategy_name," - Trade Details"]})}),(0,s.jsx)(v,{children:(0,s.jsxs)(y,{children:[(0,s.jsx)(f,{children:(0,s.jsxs)(b,{children:[(0,s.jsx)(N,{children:"Entry Date"}),(0,s.jsx)(N,{children:"Exit Date"}),(0,s.jsx)(N,{children:"Side"}),(0,s.jsx)(N,{children:"Entry Price"}),(0,s.jsx)(N,{children:"Exit Price"}),(0,s.jsx)(N,{children:"Quantity"}),(0,s.jsx)(N,{children:"P&L"}),(0,s.jsx)(N,{children:"Duration"}),(0,s.jsx)(N,{children:"Exit Reason"})]})}),(0,s.jsx)(j,{children:e.trades.map((e,t)=>(0,s.jsxs)(b,{children:[(0,s.jsx)(w,{children:e.entry_date}),(0,s.jsx)(w,{children:e.exit_date}),(0,s.jsx)(w,{children:(0,s.jsx)(ea,{variant:"buy"===e.side?"default":"secondary",children:e.side.toUpperCase()})}),(0,s.jsx)(w,{children:A(e.entry_price)}),(0,s.jsx)(w,{children:A(e.exit_price)}),(0,s.jsx)(w,{children:e.quantity}),(0,s.jsx)(w,{className:O(e.pnl),children:A(e.pnl)}),(0,s.jsxs)(w,{children:[e.duration_days," days"]}),(0,s.jsx)(w,{children:(0,s.jsx)(ea,{variant:"outline",className:"text-xs",children:e.exit_reason.replace("_"," ")})})]},t))})]})})]},e.strategy_id))}),(0,s.jsx)(en,{value:"equity",className:"space-y-4",children:_.map(e=>{var t;return(0,s.jsxs)(h,{children:[(0,s.jsx)(u,{children:(0,s.jsxs)(m,{children:[e.strategy_name," - Equity Curve"]})}),(0,s.jsx)(v,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"h-64 bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-center text-gray-500",children:"Equity curve visualization would go here"}),(0,s.jsxs)("div",{className:"text-sm text-gray-400 mt-2",children:["Showing ",e.equity_curve.length," data points from ",e.start_date," to ",e.end_date]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Final Equity"}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:A((null==(t=e.equity_curve[e.equity_curve.length-1])?void 0:t.equity)||0)})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Peak Equity"}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:A(Math.max(...e.equity_curve.map(e=>e.equity)))})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Max Drawdown"}),(0,s.jsx)("div",{className:"text-lg font-semibold text-red-600",children:L(e.max_drawdown)})]})]})]})})]},e.strategy_id)})})]})]})]})}function eu(){let[e,t]=r.useState(null),[a,i]=r.useState(null),[o,x]=r.useState(!1),[g,p]=r.useState(!1),[k,_]=r.useState(null),E=function(){let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(!1),[i,n]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[o,x]=(0,r.useState)(null),[g,h]=(0,r.useState)([]),[u,m]=(0,r.useState)([]),[p,v]=(0,r.useState)(!0),[y,f]=(0,r.useState)(null),[j,b]=(0,r.useState)(null),[N,w]=(0,r.useState)(!0),[k,_]=(0,r.useState)(null),[S,C]=(0,r.useState)([]),[E,F]=(0,r.useState)(!0),[T,P]=(0,r.useState)(null),D=(0,r.useRef)(null),z=(0,r.useRef)(null),A=(0,r.useRef)(null),L=(0,r.useCallback)(async()=>{try{let e=await l.yahooFinance.getQuote("SPY");t(e),s(!0)}catch(e){console.error("Failed to fetch live price:",e),s(!1)}},[]),O=(0,r.useCallback)(async()=>{try{F(!0),P(null);let e=await l.getStrategyTriggers({limit:20});C(Array.isArray(e)?e:[])}catch(e){P(e instanceof Error?e.message:"Failed to fetch triggers")}finally{F(!1)}},[]),R=(0,r.useCallback)(()=>{var e;if((null==(e=D.current)?void 0:e.readyState)!==WebSocket.OPEN)try{let e=l.createWebSocketConnection();D.current=e,e.onopen=()=>{s(!0),console.log("WebSocket connected")},e.onmessage=e=>{try{let a=JSON.parse(e.data);a.timestamp&&a.price?t(a):"suggestion"===a.type&&(console.log("Strategy suggestion received:",a),O())}catch(e){console.error("Failed to parse WebSocket message:",e)}},e.onclose=()=>{console.log("WebSocket disconnected"),z.current=setTimeout(()=>{R()},5e3)},e.onerror=e=>{console.error("WebSocket error:",e)}}catch(e){console.error("Failed to create WebSocket connection:",e)}},[O]),U=(0,r.useCallback)(async()=>{try{d(!0),x(null);let e=await l.getStrategies(),t=[];Array.isArray(e)?t=e:e&&"object"==typeof e&&"strategies"in e&&Array.isArray(e.strategies)&&(t=e.strategies),n(t)}catch(e){x(e instanceof Error?e.message:"Failed to fetch strategies")}finally{d(!1)}},[]),q=(0,r.useCallback)(async e=>{try{d(!0),x(null),await l.createStrategy(e),await U()}catch(e){throw x(e instanceof Error?e.message:"Failed to create strategy"),e}finally{d(!1)}},[U]),W=(0,r.useCallback)(async(e,t)=>{try{d(!0),x(null),await l.updateStrategy(e,t),await U()}catch(e){throw x(e instanceof Error?e.message:"Failed to update strategy"),e}finally{d(!1)}},[U]),B=(0,r.useCallback)(async e=>{try{await l.deleteStrategy(e),await U()}catch(e){throw e}},[U]),M=(0,r.useCallback)(async e=>{try{d(!0),x(null),await l.toggleStrategy(e),await U()}catch(e){throw x(e instanceof Error?e.message:"Failed to toggle strategy"),e}finally{d(!1)}},[U]),I=(0,r.useCallback)(async()=>{try{v(!0),f(null);let[e,t]=await Promise.all([l.getOpenTrades(),l.getClosedTrades(50)]);h(e),m(t)}catch(e){f(e instanceof Error?e.message:"Failed to fetch trades")}finally{v(!1)}},[]),V=(0,r.useCallback)(async()=>{try{w(!0),_(null);let e=await l.getPerformance();b(e)}catch(e){_(e instanceof Error?e.message:"Failed to fetch performance")}finally{w(!1)}},[]),J=(0,r.useCallback)(async e=>{try{await l.placeTrade(e),await I(),await V()}catch(e){throw e}},[I,V]),Q=(0,r.useCallback)(async(e,t)=>{try{await l.closeTrade(e,t),await I(),await V()}catch(e){throw e}},[I,V]),Y=(0,r.useCallback)(async(e,t,a,s)=>{try{await l.updateTriggerOutcome(e,t,a,s),await O()}catch(e){throw e}},[O]);return(0,r.useEffect)(()=>{(async()=>{await Promise.all([U(),I(),V(),O(),L()])})()},[U,I,V,O,L]),(0,r.useEffect)(()=>(R(),()=>{D.current&&D.current.close(),z.current&&clearTimeout(z.current)}),[R]),(0,r.useEffect)(()=>(A.current=setInterval(()=>{L()},15e3),()=>{A.current&&clearInterval(A.current)}),[L]),{livePrice:e,isConnected:a,strategies:i,strategiesLoading:c,strategiesError:o,openTrades:g,closedTrades:u,tradesLoading:p,tradesError:y,performance:j,performanceLoading:N,performanceError:k,recentTriggers:S,triggersLoading:E,triggersError:T,refreshStrategies:U,createStrategy:q,updateStrategy:W,deleteStrategy:B,toggleStrategy:M,refreshTrades:I,placeTrade:J,closeTrade:Q,refreshPerformance:V,refreshTriggers:O,updateTriggerOutcome:Y}}(),T=e=>{t(e)},A=async e=>{p(!0),_(null);try{o?await E.createStrategy({name:e.name,description:e.description||"",strategy_type:e.strategy_type||"standard",conditions:e.conditions||"",is_active:!0}):await E.updateStrategy(a.id,{name:e.name,description:e.description||"",strategy_type:e.strategy_type||"standard",conditions:e.conditions||"",is_active:e.is_active}),i(null),x(!1)}catch(e){console.error("Failed to save strategy:",e),_(e instanceof Error?e.message:"Failed to save strategy")}finally{p(!1)}},L=async e=>{if(confirm("Are you sure you want to delete this strategy?")){p(!0),_(null);try{await E.deleteStrategy(e)}catch(e){console.error("Failed to delete strategy:",e),_(e instanceof Error?e.message:"Failed to delete strategy")}finally{p(!1)}}},O=async e=>{p(!0),_(null);try{await E.toggleStrategy(e)}catch(e){console.error("Failed to toggle strategy:",e),_(e instanceof Error?e.message:"Failed to toggle strategy")}finally{p(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen flex bg-gradient-to-br from-gray-900 via-gray-800 to-gray-700 font-sans",children:[(0,s.jsxs)("aside",{className:"w-60 bg-gradient-to-b from-gray-950 to-gray-800 shadow-xl flex flex-col p-6 rounded-tr-3xl rounded-br-3xl border-r border-gray-700",children:[(0,s.jsxs)("div",{className:"text-3xl font-extrabold text-white tracking-tight mb-10 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"inline-block w-3 h-3 bg-blue-500 rounded-full mr-2"}),"Whispr Copilot"]}),(0,s.jsxs)("nav",{className:"flex flex-col gap-4 text-lg",children:[(0,s.jsx)("a",{href:"#",className:"text-gray-200 hover:text-blue-400 font-semibold transition",children:"Dashboard"}),(0,s.jsx)("a",{href:"#",className:"text-gray-400 hover:text-blue-400 transition",children:"Rules"}),(0,s.jsx)("a",{href:"#",className:"text-gray-400 hover:text-blue-400 transition",children:"Trades"}),(0,s.jsx)("a",{href:"#",className:"text-gray-400 hover:text-blue-400 transition",children:"Backtesting"}),(0,s.jsx)("a",{href:"#",className:"text-gray-400 hover:text-blue-400 transition",children:"Replay"})]}),(0,s.jsx)("div",{className:"mt-auto text-xs text-gray-500 pt-10",children:"v0.1 MVP"})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsxs)("header",{className:"h-20 bg-gradient-to-r from-gray-950 to-gray-800 shadow flex items-center px-12 justify-between rounded-bl-3xl border-b border-gray-700",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-white tracking-tight",children:"Dashboard"}),(0,s.jsxs)(S,{children:[(0,s.jsx)(C,{asChild:!0,children:(0,s.jsx)("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold shadow hover:bg-blue-700 transition",children:"Open Dialog"})}),(0,s.jsxs)(P,{className:"bg-gray-900 text-white p-8 rounded-2xl shadow-2xl z-50 w-96 border border-gray-700",children:[(0,s.jsx)(D,{className:"text-xl font-bold mb-2",children:"Radix UI Dialog"}),(0,s.jsx)(z,{className:"mb-4 text-gray-400",children:"This is a placeholder dialog using shadcn/ui."}),(0,s.jsx)(F,{asChild:!0,children:(0,s.jsx)("button",{className:"mt-2 px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-600",children:"Close"})})]})]})]}),(0,s.jsxs)("main",{className:"flex-1 p-10 grid grid-cols-1 md:grid-cols-3 gap-10",children:[(0,s.jsxs)(h,{className:"col-span-1 flex flex-col items-center justify-center cursor-pointer bg-gradient-to-br from-blue-900 to-blue-700 text-white shadow-xl rounded-2xl border border-blue-800 hover:shadow-2xl transition-all duration-200",onClick:()=>T("live-price"),children:[(0,s.jsx)(u,{children:(0,s.jsxs)(m,{className:"flex items-center gap-2 text-white text-base mb-2",children:["Live Price",(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(E.isConnected?"bg-green-400":"bg-red-400")})]})}),(0,s.jsxs)(v,{className:"flex flex-col items-center",children:[E.livePrice?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-4xl font-extrabold text-white drop-shadow",children:n(E.livePrice.price)}),(0,s.jsx)("div",{className:"text-sm font-semibold ".concat(E.livePrice.change>=0?"text-green-300":"text-red-300"),children:c(E.livePrice.change_percent)}),(0,s.jsx)("div",{className:"text-xs text-blue-200 mt-1",children:E.livePrice.symbol})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-4xl font-extrabold text-white drop-shadow",children:"--"}),(0,s.jsx)("div",{className:"text-xs text-blue-200 mt-1",children:"Connecting..."})]}),(0,s.jsx)("div",{className:"text-xs text-blue-300 mt-3 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to view details"})]})]}),(0,s.jsxs)(h,{className:"col-span-2 cursor-pointer bg-gradient-to-br from-gray-800 to-gray-700 text-white shadow-xl rounded-2xl border border-gray-700 hover:shadow-2xl transition-all duration-200",onClick:()=>T("strategies"),children:[(0,s.jsx)(u,{children:(0,s.jsx)(m,{className:"text-white text-base font-semibold",children:"Active Strategies"})}),(0,s.jsx)(v,{children:E.strategiesLoading?(0,s.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading strategies..."}):E.strategiesError?(0,s.jsxs)("div",{className:"text-red-400 text-center py-8",children:["Error: ",E.strategiesError]}):(0,s.jsxs)(y,{className:"w-full text-left text-white",children:[(0,s.jsx)(f,{className:"bg-gray-900",children:(0,s.jsxs)(b,{children:[(0,s.jsx)(N,{className:"text-gray-400",children:"Name"}),(0,s.jsx)(N,{className:"text-gray-400",children:"Type"}),(0,s.jsx)(N,{className:"text-gray-400",children:"Status"}),(0,s.jsx)(N,{className:"text-gray-400",children:"Triggers"})]})}),(0,s.jsxs)(j,{children:[E.strategies.slice(0,5).map(e=>(0,s.jsxs)(b,{className:"hover:bg-gray-900/40 transition",children:[(0,s.jsx)(w,{className:"font-medium text-white",children:e.name}),(0,s.jsx)(w,{className:"text-blue-200",children:e.strategy_type||"standard"}),(0,s.jsx)(w,{className:"font-semibold ".concat(d(e.is_active?"active":"inactive")),children:e.is_active?"Active":"Inactive"}),(0,s.jsx)(w,{className:"text-gray-300",children:E.recentTriggers.filter(t=>t.strategy_id===e.id).length})]},e.id)),0===E.strategies.length&&(0,s.jsx)(b,{children:(0,s.jsx)(w,{colSpan:4,className:"py-4 text-center text-gray-400",children:"No strategies found"})})]})]})})]}),(0,s.jsxs)(h,{className:"col-span-3 cursor-pointer bg-gradient-to-br from-gray-800 to-gray-700 text-white shadow-xl rounded-2xl border border-gray-700 hover:shadow-2xl transition-all duration-200",onClick:()=>T("trades"),children:[(0,s.jsx)(u,{children:(0,s.jsx)(m,{className:"text-white text-base font-semibold",children:"Recent Trades"})}),(0,s.jsx)(v,{children:E.tradesLoading?(0,s.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading trades..."}):E.tradesError?(0,s.jsxs)("div",{className:"text-red-400 text-center py-8",children:["Error: ",E.tradesError]}):(0,s.jsxs)(y,{className:"w-full text-left text-white",children:[(0,s.jsx)(f,{className:"bg-gray-900",children:(0,s.jsxs)(b,{children:[(0,s.jsx)(N,{className:"text-gray-400",children:"Time"}),(0,s.jsx)(N,{className:"text-gray-400",children:"Side"}),(0,s.jsx)(N,{className:"text-gray-400",children:"Qty"}),(0,s.jsx)(N,{className:"text-gray-400",children:"Entry"}),(0,s.jsx)(N,{className:"text-gray-400",children:"Exit"}),(0,s.jsx)(N,{className:"text-gray-400",children:"P&L"}),(0,s.jsx)(N,{className:"text-gray-400",children:"Status"})]})}),(0,s.jsxs)(j,{children:[[...E.openTrades,...E.closedTrades.slice(0,3)].map(e=>(0,s.jsxs)(b,{className:"hover:bg-gray-900/40 transition",children:[(0,s.jsx)(w,{children:new Date(e.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,s.jsx)(w,{className:(e=>{switch(e.toLowerCase()){case"buy":return"text-blue-400";case"sell":return"text-red-400";default:return"text-white"}})(e.side),children:e.side.toUpperCase()}),(0,s.jsx)(w,{children:e.quantity}),(0,s.jsx)(w,{children:n(e.entry_price)}),(0,s.jsx)(w,{children:e.exit_price?n(e.exit_price):"--"}),(0,s.jsx)(w,{className:e.pnl&&e.pnl>=0?"text-green-400":"text-red-400",children:e.pnl?n(e.pnl):"--"}),(0,s.jsx)(w,{className:d(e.status),children:e.status.toUpperCase()})]},e.id)),0===E.openTrades.length&&0===E.closedTrades.length&&(0,s.jsx)(b,{children:(0,s.jsx)(w,{colSpan:7,className:"py-4 text-center text-gray-400",children:"No trades found"})})]})]})})]})]})]}),(0,s.jsx)(S,{open:!!e,onOpenChange:()=>t(null),children:(0,s.jsxs)(P,{className:"bg-gray-900 text-white p-8 rounded-2xl shadow-2xl z-50 w-[600px] max-h-[80vh] overflow-y-auto border border-gray-700",children:[(0,s.jsxs)(D,{className:"text-2xl font-bold text-white mb-4",children:["live-price"===e&&"Live Price Details","strategies"===e&&"Strategy Management","trades"===e&&"Trade History","backtesting"===e&&"Strategy Backtesting"]}),(0,s.jsxs)(z,{className:"mb-6 text-gray-400",children:["live-price"===e&&"Detailed view of current market prices and indicators.","strategies"===e&&"Manage your trading strategies and conditions.","trades"===e&&"Complete history of all trades and performance metrics.","backtesting"===e&&"Test your strategies against historical data."]}),(0,s.jsxs)("div",{className:"text-gray-300",children:["live-price"===e&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Current Price"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-white",children:E.livePrice?n(E.livePrice.price):"--"})]}),(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"24h Change"}),(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(E.livePrice&&E.livePrice.change>=0?"text-green-400":"text-red-400"),children:E.livePrice?c(E.livePrice.change_percent):"--"})]})]}),E.livePrice&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Bid"}),(0,s.jsx)("div",{className:"text-xl font-bold text-white",children:n(E.livePrice.bid)})]}),(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Ask"}),(0,s.jsx)("div",{className:"text-xl font-bold text-white",children:n(E.livePrice.ask)})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"Market Data"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:["Volume: ",E.livePrice.volume.toLocaleString()]}),(0,s.jsxs)("div",{children:["Symbol: ",E.livePrice.symbol]}),(0,s.jsxs)("div",{children:["Source: ",E.livePrice.source]}),(0,s.jsxs)("div",{children:["Connection: ",E.isConnected?"Connected":"Disconnected"]})]})]})]})]}),"strategies"===e&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Strategies (",E.strategies.length,")"]}),(0,s.jsx)(R,{onClick:()=>{i(null),x(!0),_(null)},className:"bg-blue-600 hover:bg-blue-700",disabled:g,children:"+ Add New Strategy"})]}),E.strategiesLoading?(0,s.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading strategies..."}):E.strategiesError?(0,s.jsxs)("div",{className:"text-red-400 text-center py-8",children:["Error: ",E.strategiesError]}):(0,s.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[k&&(0,s.jsx)("div",{className:"text-red-400 text-center py-2",children:k}),E.strategies.map(e=>(0,s.jsx)("div",{className:"bg-gray-700 p-4 rounded-lg",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:e.prompt_tpl}),(0,s.jsxs)("div",{className:"text-xs text-blue-300 mt-1",children:["Type: ",e.strategy_type||"standard"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Expression: ",e.strategy_expression]})]}),(0,s.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,s.jsx)(R,{size:"sm",variant:e.is_active?"destructive":"default",onClick:t=>{t.stopPropagation(),O(e.id)},disabled:g,children:e.is_active?"Disable":"Enable"}),(0,s.jsx)(R,{size:"sm",variant:"outline",onClick:t=>{t.stopPropagation(),i(e),x(!1),_(null)},disabled:g,children:"Edit"}),(0,s.jsx)(R,{size:"sm",variant:"destructive",onClick:t=>{t.stopPropagation(),L(e.id)},disabled:g,children:"Delete"})]})]})},e.id)),0===E.strategies.length&&(0,s.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No strategies found"})]})]}),"trades"===e&&(0,s.jsx)("div",{className:"space-y-4",children:E.performanceLoading?(0,s.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading performance data..."}):E.performanceError?(0,s.jsxs)("div",{className:"text-red-400 text-center py-8",children:["Error: ",E.performanceError]}):E.performance?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Total Trades"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-white",children:E.performance.total_trades})]}),(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Win Rate"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[E.performance.win_rate.toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Total P&L"}),(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(E.performance.total_pnl>=0?"text-green-400":"text-red-400"),children:n(E.performance.total_pnl)})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Average P&L"}),(0,s.jsx)("div",{className:"text-xl font-bold ".concat(E.performance.average_pnl>=0?"text-green-400":"text-red-400"),children:n(E.performance.average_pnl)})]}),(0,s.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Largest Win"}),(0,s.jsx)("div",{className:"text-xl font-bold text-green-400",children:n(E.performance.largest_win)})]})]})]}):(0,s.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No performance data available"})}),"backtesting"===e&&(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(eh,{})})]}),(0,s.jsx)(F,{asChild:!0,children:(0,s.jsx)("button",{className:"mt-6 px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition",children:"Close"})})]})}),(0,s.jsx)(S,{open:!!a||o,onOpenChange:()=>{i(null),x(!1)},children:(0,s.jsxs)(P,{className:"bg-gray-900 text-white p-8 rounded-2xl shadow-2xl z-50 w-[500px] border border-gray-700",children:[(0,s.jsx)(D,{className:"text-xl font-bold text-white mb-4",children:o?"Add New Strategy":"Edit Strategy"}),(0,s.jsx)(em,{strategy:a,onSave:A,onCancel:()=>{i(null),x(!1),_(null),p(!1)},loading:g,error:k})]})})]})}function em(e){var t;let{strategy:a,onSave:i,onCancel:l,loading:n,error:c}=e,[d,o]=r.useState({name:(null==a?void 0:a.name)||"",description:(null==a?void 0:a.description)||"",strategy_type:(null==a?void 0:a.strategy_type)||"standard",conditions:(null==a?void 0:a.conditions)||"",is_active:null==(t=null==a?void 0:a.is_active)||t}),x=async e=>{e.preventDefault(),await i(d)};return(0,s.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(W,{htmlFor:"name",className:"text-white",children:"Strategy Name"}),(0,s.jsx)(U,{id:"name",value:d.name,onChange:e=>o({...d,name:e.target.value}),className:"bg-gray-800 border-gray-600 text-white",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(W,{htmlFor:"description",className:"text-white",children:"Description"}),(0,s.jsx)(B,{id:"description",value:d.description,onChange:e=>o({...d,description:e.target.value}),className:"bg-gray-800 border-gray-600 text-white",rows:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(W,{htmlFor:"strategy_type",className:"text-white",children:"Strategy Type"}),(0,s.jsxs)(Q,{value:d.strategy_type,onValueChange:e=>o({...d,strategy_type:e}),children:[(0,s.jsx)(G,{className:"bg-gray-800 border-gray-600 text-white",children:(0,s.jsx)(Y,{})}),(0,s.jsxs)(H,{className:"bg-gray-800 border-gray-600",children:[(0,s.jsx)(Z,{value:"standard",children:"Standard"}),(0,s.jsx)(Z,{value:"atr_based",children:"ATR Based"}),(0,s.jsx)(Z,{value:"vomy_ivomy",children:"Vomy/iVomy"}),(0,s.jsx)(Z,{value:"po_dot",children:"PO Dot"}),(0,s.jsx)(Z,{value:"conviction_arrow",children:"Conviction Arrow"}),(0,s.jsx)(Z,{value:"golden_gate",children:"Golden Gate"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(W,{htmlFor:"conditions",className:"text-white",children:"Conditions/Expression"}),(0,s.jsx)(B,{id:"conditions",value:d.conditions,onChange:e=>o({...d,conditions:e.target.value}),className:"bg-gray-800 border-gray-600 text-white",rows:3,placeholder:"e.g., price > 100 && volume > 1000"})]}),!a&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"is_active",checked:d.is_active,onChange:e=>o({...d,is_active:e.target.checked}),className:"rounded border-gray-600 bg-gray-800"}),(0,s.jsx)(W,{htmlFor:"is_active",className:"text-white",children:"Active"})]}),c&&(0,s.jsx)("div",{className:"text-red-400 text-sm",children:c}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(R,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),(0,s.jsx)(R,{type:"submit",disabled:n,children:n?"Saving...":a?"Update":"Create"})]})]})}},9207:(e,t,a)=>{Promise.resolve().then(a.bind(a,1812))}},e=>{e.O(0,[336,441,255,358],()=>e(e.s=9207)),_N_E=e.O()}]);